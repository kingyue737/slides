## 在线监测前端

- 新增功能
  - 动态通量图
  - 电厂历史数据详表
  - 燃耗可视化
  - 表格读取，确认对话框，面包屑导航，状态栏 ...
- 界面美化， 路由跳转与部分页面重新设计
- 完善单元测试和集成测试
- 大规模重构
  - 重写警报模块
  - 重写所有参数设置
  - vue-echarts 和 composables 重写所有图表
  - 重写前员工的遗留代码
- 技术栈替换
  - 淘汰了过时的 class API
  - 移除了过时的 Vue 2 filter 和 Mixin
  - pinia 替代 vuex 和 ref 管理全局堆芯数据与设置
  - 全部使用`<script setup>`+ Composition API
  - ...

在状态栏实时显示在线监测系统的状态

## Vitify Admin

主要功能：

- ⚡️ **Vite, pnpm, ESBuild** - 快得一逼
- 🗂️ **Pages** - 基于文件的路由
- 📑 **布局系统** - 零配置布局
- 🦾 **TypeScript** - 支持 Vuetify2 模板 intelisense, Powered by Volar
- 🔥 **`<script setup>`** - 使用 Vue3 语法
- 🍍 **状态管理** - Pinia
- 🧪 **测试** - Vitest 单元/组件测试 + Cypress E2E 测试
- 🌍 **I18n** - 国际化开箱即用
- 📦 **自动 import** - 组件自动化加载，API 自动导入
- 😃 **Icons** - SVG 图标自动注册
- 📉 **数据可视化** - Vue-Echarts
- 🤡 **Mock Service Worker** - 开发与测试环境下模拟后端数据
- 💩 **PostCSS + Babel** - 浏览器兼容

层层加码

所有新功能向后移植到在线监测。
压水堆换料安全分析前端基于该模板。
编写文档，分享开发经验及使用方法，并用于软著申请。

这个项目一开始只是我的 playground，用来测试技术栈更替的可行性和试验我的一些新想法，通过测试后的新特性，将其 backport 到在线监测中去。在在线监测的交付节点告一段落后，我持续地对其进行迭代。

今年之前我一共只提交过 3 个 issue，都是给 openmc 的。而今年一年，为了开发出我们的前端模板项目以及后期的维护，我提交了将近 100 个 issue，复现了其中。开源社区的良性的互利。我在日常工作中遇到 bug，尝试去复现他们反馈给社区，而社区的作者也愿意接受贡献者的 push，及时地修复 bug，并提供我所需要的新功能。

我们公司的某些甲方，像核安全局的人对产品的界面和用户体验，有着相对严格的要求。以 Vitify Admin 作为基础打造的产品，我相信绝对可以满足他们。

上礼拜我去秦山开会，他们堆重水堆换料软件的质量提出了要求与希望。当时我就很自信

同时我也为模板提供了文档，集合了一些这个项目在使用上的要点和我踩过的坑，解决这些坑的方法。方便产品部的其他同事使用。当时正值我们公司招新人，那我也希望有了这个东西，也能方便我们新来的同事快速上手，熟悉我们公司产品用到的技术栈。恰好后面软著申请的时候也派上了用场，把现成的文档翻译一下就能当材料提交了。那就正好，时间都花在了刀刃上。

- 核星首个开箱即用的企业级前端模板
- Vue2 前端框架下最先进的技术栈
- 大幅提升前端产品的开发效率
- 简洁 美观 符合越哥的审美
- 兼容旧版本浏览器
  - css: postcss-preset-env
  - polyfill: vite-plugin-legacy + babel
  - transpile: esbuild

让开发人员能在使用最新的语法和特性，保证开发效率与体验的同时，让我们客户的 360 浏览器也能正常运行。并且视觉效果上尽可能接近现代浏览器。浏览器兼容是一个一直要背在身上的包袱，起初我想的是如果我们能让电厂都装上现代浏览器，那就可以彻底甩掉这个包袱，但如果不能，那就想办法把这个包袱的重量减到最小。

同类项目当中最好的，不仅是在社区里是最好的，而且是最适合我们公司的。Vuetify 核心团队的三号人物 star 了我的项目，这是他的 github 中唯二 star 的项目。我在模板中加入的 vue 单组件路由信息的自动补全和类型校验功能，被 vite-plugin-pages 的作者打了星，同时 vue 团队的二把手也称赞了这一功能。还有刚才提到的前端界面国际化，全网第一个成功结合了 vue2.7， vite 和 vue-i18n custom block 的人。当时为了能在公司的模板里引入这个功能，我在相关开源库作者的屁股后面天天催。连发了 N 个 issue。我在做 360 浏览器兼容的时候，也做了一些最佳实践，让我只要在设置文件中填写浏览器版本，就能统一地，在构建程序包时，把代码转译成旧版浏览器能理解的代码，并补全旧版浏览器缺失的 API。有热心的网友把我的方法写到博客里，有巨佬级的人物直接在框架的仓库里提了 PR 认为可以把这一实践实现的功能直接写进框架里。

我们使用的 UI 库 Vuetify 将会在今年上半年迎来 v3.3，完成对我们现在所使用 Vuetify 2 所有组件的功能实现。届时我也会将 Vitify Admin 的技术栈全线升级到 Vue3 版本。届时，核星产品的质量，我们产品部工程师的开发体验的效率。至此，我们公司的 web 前端可以说是定型了。在可以预见的将来，很多年以内将不会再需要大规模的更新了。

我加入公司前端开发工作的一周年的一个答卷。

## 压水堆安全分析

去年我给自己定下了两个大目标，一个是完成我们公司前端的现代化建设，第二个则是入门后端，向全栈发展。
得益于 Vitify Admin 这一开箱即用的模板,我可以把大多数的精力都放在后端开发上。对比一下去年年底，当时为了开发安审中心项目可以说是没日没夜搞得焦头烂额，一年之后，一切都变得游刃有余。

- 产品设计
- 前端开发
- 入门后端开发
- 特定事故安全分析
  - EGRET h5
- Python 工程化
  - 后端框架 FastAPI
  - formatter: Black + AutoFlake + Flake8
  - 类型检查： Mypy + Pyright
  - 包管理工具：Poetry
  - 数据库 ORM: Postgres + SQLModel + SQLAlchemy
  - Celery, redis
- Docker
  - Compose
  - Multi-stage build
  - 邮件部署

基于 h5 版本的 egret
邮件部署

## 自我提升

2021 年总结的时候我还在一个不断丰富自己武器库的过程，而随着武器越来越多，我需要更好地管理与使用这些武器。这一年结合我工作的实际需求，我也积累了许多提升工作效率的技巧。
年初封城期间，我发现我家的电脑配置已经很难再让我高效地开发了。但是买了台新电脑之后，我所有东西都要重新安装配置。不仅如此，考虑到解除封城后的疫情反复。还有紧急交付节点前的赶工，个人电脑的工作环境对我越发重要。那工作日我在工位电脑上更新的配置和改动，我回到家需要依葫芦画瓢重做一遍。我在家新增的环境上的改动，礼拜一回到工位，还要再 copy 一遍。

- dotfiles

  - npm 设置
  - pip 源
  - powershell 常用函数
  - git 配置
  - windows terminal 设置
  - oh my posh 设置
  - wsl 设置
  - docker daemon
  - openmc 环境变量
  - conda 通道与源设置
  - ssh 免密登录
  - ...

- Windows 沙盒

通过单独一个 git 仓库，管理所有的配置文件和脚本，并且通过 powershell 脚本完成绝大多数软件的配置和安装。这样一来，要同步我多台个人电脑的工作环境，只需要 git push 和 pull 就可以完成，并且还有清晰的改动历史。我的电脑哪天爆了，再换一台新的。没有关系仓库拉下来，跑一下脚本就 ok 了。明年有空的话我也希望组织更多的分享会，讨论分享一些提升工作效率的 tips，和大家共同进步

## 2023

- Vuetify v3.3
- 后端的技术栈的熟悉与探索。
- docker 集群部署。
- egret 2
- 重水堆换料
- 安审中心项目...

我的目标不仅仅是做个web套壳，而是能融入原生桌面端交互体验。

## 其他
- Figma 原型图设计
- OpenM/电子规程执行.pngC
  - TRISO 球床堆的建模
  - 船用板状燃料堆辐射屏蔽问题
    - Weighted Windows
- 工作效率
  - Shell Tools and Scripting
  - dotfiles

虽然模型很快就建好了，但是遇到了些小坑。这是我第一次用 OpenMC 计算屏蔽问题。反应堆的外径很大，从侧边出射的光子很少，很难统计出。
好在 openmc 去年新出了 Weighted Windows 这个功能。我可以根据预先估算的通量，逐级降低光子权重但是倍增光子的数量。降低统计结果的方差。目前已经能够获得方差较小的光子能谱。

把自己的技能，工作能力，公司产品的技术栈带到一个更高的台阶